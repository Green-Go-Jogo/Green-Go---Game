<!DOCTYPE html>
<html>
<head>
    <title>Scanner QR Code</title>
</head>
<body>
    <button onclick="startCamera()">Listar Dispositivos</button>
    <ul id="deviceList"></ul>
    <video id="video" ></video>
    
    <script src="script.js"></script>
</body>
<script>
  async function listDevices() {
    try {
        const devices = await navigator.mediaDevices.enumerateDevices();
        const deviceListElement = document.getElementById('deviceList');
        deviceListElement.innerHTML = ''; // Limpa a lista antes de adicionar os novos dispositivos

        devices.forEach(device => {
            const listItem = document.createElement('li');
            listItem.textContent = `${device.kind}: ${device.label}`;
            deviceListElement.appendChild(listItem);
        });
    } catch (error) {
        console.error('Erro ao listar dispositivos:', error);
    }
}

async function startCamera() {
    try {
        const devices = await navigator.mediaDevices.enumerateDevices();
        let videoDeviceId = null;

        for (const device of devices) {
            if (device.kind === 'videoinput' && (device.label.toLowerCase().includes('traseira') || device.label.toLowerCase().includes('back'))) {
                videoDeviceId = device.deviceId;
                break;
            }
        }

        if (videoDeviceId) {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { deviceId: { exact: videoDeviceId } } });
            const videoElement = document.getElementById('video');
            videoElement.srcObject = stream;
            videoElement.play();
        } else {
            console.error('Nenhuma câmera traseira encontrada.');
        }
    } catch (error) {
        console.error('Erro ao acessar a câmera:', error);
    }
}

</script>
</html>
